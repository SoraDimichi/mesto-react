(this["webpackJsonpmesto-react"]=this["webpackJsonpmesto-react"]||[]).push([[0],{15:function(e,t,n){},16:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n(1),c=n.n(r),o=n(6),s=n.n(o),i=(n(15),n(9)),u=n(2),l=n.p+"static/media/header__logo.a307e1c4.svg";var p=function(){return Object(a.jsx)("header",{className:"header",children:Object(a.jsx)("img",{className:"header__logo",src:l,alt:"\u041b\u043e\u0433\u043e\u0442\u0438\u043f"})})},d=n.p+"static/media/profile__editButton.a1892ea7.svg",f=n.p+"static/media/profile__avatarButton.a086f758.svg",m=n(7),j=n(8),_=new(function(){function e(t){var n=t.baseUrl,a=t.headers;Object(m.a)(this,e),this._baseUrl=n,this._headers=a}return Object(j.a)(e,[{key:"_getResponseData",value:function(e,t){return fetch("".concat(this._baseUrl).concat(e),t).then((function(e){return e.ok?e.json():Promise.reject(new Error("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e.status)))}))}},{key:"getInitialCards",value:function(){return this._getResponseData("/cards",{headers:this._headers})}},{key:"getUserInfo",value:function(){return this._getResponseData("/users/me/",{headers:this._headers})}},{key:"patchUserInfo",value:function(e){return this._getResponseData("/users/me/",{headers:this._headers,method:"PATCH",body:JSON.stringify(e)})}},{key:"patchUserAvatar",value:function(e){return this._getResponseData("/users/me/avatar",{headers:this._headers,method:"PATCH",body:JSON.stringify(e)})}},{key:"postNewCard",value:function(e){return this._getResponseData("/cards",{headers:this._headers,method:"POST",body:JSON.stringify(e)})}},{key:"deleteCard",value:function(e){return this._getResponseData("/cards/".concat(e),{method:"DELETE",headers:this._headers})}},{key:"like",value:function(e,t){var n;return n=t?"DELETE":"PUT",this._getResponseData("/cards/likes/".concat(e),{headers:this._headers,method:n})}}]),e}())({baseUrl:"https://mesto.nomoreparties.co/v1/cohort-16",headers:{authorization:"9f008da4-23f8-43a7-a6e3-8665fc1f4b68","Content-Type":"application/json"}}),h=n.p+"static/media/card__deleteButtonImage.a274c87c.svg",b=c.a.createContext();var O=function(e){var t=e.onCardClick,n=e.onCardLike,r=e.onDeleteCard,o=e.card,s=o.name,i=void 0===s?"":s,u=o.link,l=void 0===u?"":u,p=o.likes,d=void 0===p?[]:p,f=c.a.useContext(b),m=o.owner._id===f._id,j="card__deleteButton".concat(m?"":" card__deleteButton_hidden"),_=d.some((function(e){return e._id===f._id})),O="card__likeButton".concat(_?" card__likeButton_active":"");return Object(a.jsxs)("li",{className:"card",children:[Object(a.jsx)("button",{className:j,onClick:function(){return r(o)},children:Object(a.jsx)("img",{className:"card__deleteButtonImage",src:h,alt:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"})}),Object(a.jsx)("div",{className:"card__imageContainer",style:{backgroundImage:"url('".concat(l,"')")},onClick:function(){return t(o)}}),Object(a.jsx)("p",{className:"card__title",children:i}),Object(a.jsx)("button",{className:O,onClick:function(){return n(o)}}),Object(a.jsx)("p",{className:"card__likeCounter",children:d.length})]})};var v=function(e){var t=e.onEditAvatar,n=e.onEditProfile,r=e.onAddPlace,o=e.setCards,s=e.cards,i=e.cardClick,u=c.a.useContext(b),l=u.name,p=u.about,m=u.avatar,j=function(e){var t=e.likes.some((function(e){return e._id===u._id}));_.like(e._id,t).then((function(t){var n=s.map((function(n){return n._id===e._id?t:n}));o(n)})).catch((function(e){return new Error("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e))}))},h=function(e){_.deleteCard(e._id).then((function(){var t=s.filter((function(t){return t._id!==e._id}));o(t)})).catch((function(e){return new Error("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e))}))};return Object(a.jsxs)("main",{className:"content",children:[Object(a.jsxs)("section",{className:"profile",children:[Object(a.jsx)("div",{className:"profile__avatar",style:{backgroundImage:"url('".concat(m,"')")}}),Object(a.jsx)("button",{className:"profile__avatarButton",onClick:t,children:Object(a.jsx)("img",{src:f,alt:"\u0438\u0437\u043c\u0435\u043d\u0438\u0442\u044c"})}),Object(a.jsx)("h1",{className:"profile__name",children:l}),Object(a.jsx)("p",{className:"profile__about",children:p}),Object(a.jsx)("button",{className:"profile__openPopupButton",onClick:n,children:Object(a.jsx)("img",{className:"profile__openPopupButtonImage",src:d,alt:"\u041e\u0442\u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"})}),Object(a.jsx)("button",{className:"profile__addButton",onClick:r,children:"+"})]}),Object(a.jsx)("ul",{className:"cards",children:s.map((function(e){return Object(a.jsx)(O,{card:e,onCardClick:i,onCardLike:j,onDeleteCard:h},e._id)}))})]})};var x=function(){return Object(a.jsx)("footer",{className:"footer",children:Object(a.jsx)("p",{className:"footer__copyright",children:"\xa9 2020 Mesto Russia"})})},g=n.p+"static/media/popup__closeButtonImage.153147d3.svg";var N=function(e){var t=e.buttonTitle,n=e.onClose,r=e.children,c=e.name,o=e.title,s=e.isOpen,i=e.onSubmit;return Object(a.jsxs)("div",{className:"popup popup_type_".concat(c).concat(s?" popup_opened":""),children:[Object(a.jsx)("button",{className:"popup__closeButton",onClick:n,children:Object(a.jsx)("img",{className:"popup__closeButtonImage",src:g,alt:"\u0437\u0430\u043a\u0440\u044b\u0442\u044c"})}),Object(a.jsx)("form",{className:"popup__form",onSubmit:i,children:Object(a.jsxs)("fieldset",{className:"popup__formFieldSet",name:c,children:[Object(a.jsx)("legend",{className:"popup__formTitle",children:o}),r,Object(a.jsx)("input",{type:"submit",title:t,value:t,className:"popup__formSubmitButton"})]})})]})};var C=function(e){var t=e.isOpen,n=e.onClose,r=e.onUpdateUser,o=c.a.useContext(b),s=c.a.useState(""),i=Object(u.a)(s,2),l=i[0],p=i[1],d=c.a.useState(""),f=Object(u.a)(d,2),m=f[0],j=f[1];return c.a.useEffect((function(){p(o.name),j(o.about)}),[o]),Object(a.jsxs)(N,{name:"editProfile",title:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u041f\u0440\u043e\u0444\u0438\u043b\u044c",buttonTitle:"C\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",isOpen:t,onClose:n,onSubmit:function(e){e.preventDefault(),r({name:l,about:m}),e.target.reset()},children:[Object(a.jsxs)("label",{className:"popup__formField",children:[Object(a.jsx)("input",{type:"text",minLength:"2",maxLength:"40",required:!0,title:"\u0418\u043c\u044f",placeholder:"\u0418\u043c\u044f",id:"profileNameInput",className:"popup__formInputText popup__formInputText_firstInput",value:l,onChange:function(e){return function(e){return p(e.target.value)}(e)}}),Object(a.jsx)("span",{className:"popup__formInputError",id:"profileNameInputError"})]}),Object(a.jsxs)("label",{className:"popup__formField",children:[Object(a.jsx)("input",{type:"text",minLength:"2",maxLength:"200",required:!0,title:"\u041e \u0441\u0435\u0431\u0435",placeholder:"\u041e \u0441\u0435\u0431\u0435",id:"profileAboutInput",className:"popup__formInputText popup__formInputText_secondInput",value:m,onChange:function(e){return function(e){return j(e.target.value)}(e)}}),Object(a.jsx)("span",{className:"popup__formInputError",id:"profileAboutInputError"})]})]})};var I=function(e){var t=e.isOpen,n=e.onClose,r=e.onUpdateAvatar,o=c.a.useRef(),s=c.a.useState(""),i=Object(u.a)(s,2),l=i[0],p=i[1];return c.a.useEffect((function(){o.current.value=""}),[n]),Object(a.jsx)(N,{name:"editAvatar",title:"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0410\u0432\u0430\u0442\u0430\u0440",buttonTitle:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",isOpen:t,onClose:n,onSubmit:function(e){e.preventDefault(),r({avatar:o.current.value}),e.target.reset()},children:Object(a.jsxs)("label",{className:"popup__formField",children:[Object(a.jsx)("input",{type:"url",required:!0,title:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0443",placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0443",id:"avatarUrlInput",className:"popup__formInputText",ref:o,value:l,onChange:function(e){return function(e){return p(e.target.value)}(e)}}),Object(a.jsx)("span",{className:"popup__formInputError",id:"avatarUrlInputError"})]})})};var k=function(e){var t=e.isOpen,n=e.onClose,r=e.onAddPlace,o=c.a.useState(""),s=Object(u.a)(o,2),i=s[0],l=s[1],p=c.a.useState(""),d=Object(u.a)(p,2),f=d[0],m=d[1];return c.a.useEffect((function(){l(""),m("")}),[n]),Object(a.jsxs)(N,{name:"addCard",title:"\u041d\u043e\u0432\u043e\u0435 \u041c\u0435\u0441\u0442\u043e",buttonTitle:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c",isOpen:t,onClose:n,onSubmit:function(e){e.preventDefault(),r({name:i,link:f}),e.target.reset()},children:[Object(a.jsxs)("label",{className:"popup__formField",children:[Object(a.jsx)("input",{type:"text",minLength:"1",maxLength:"30",required:!0,title:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",id:"placeNameInput",className:"popup__formInputText popup__formInputText_firstInput",value:i,onChange:function(e){return function(e){return l(e.target.value)}(e)}}),Object(a.jsx)("span",{className:"popup__formInputError",id:"placeNameInputError"})]}),Object(a.jsxs)("label",{className:"popup__formField",children:[Object(a.jsx)("input",{type:"url",required:!0,title:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0443",placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0443",id:"placeUrlInput",className:"popup__formInputText popup__formInputText_secondInput",value:f,onChange:function(e){return function(e){return m(e.target.value)}(e)}}),Object(a.jsx)("span",{className:"popup__formInputError",id:"placeUrlInputError"})]})]})};var E=function(e){var t=e.card,n=e.card,r=(n=void 0===n?{link:"",name:""}:n).link,c=n.name,o=e.onClose;return Object(a.jsxs)("div",{className:"popup popup_type_image".concat(t?" popup_opened":""),children:[Object(a.jsx)("button",{className:"popup__closeButton",onClick:o,children:Object(a.jsx)("img",{className:"popup__closeButtonImage",src:g,alt:"\u0437\u0430\u043a\u0440\u044b\u0442\u044c"})}),Object(a.jsxs)("figure",{className:"popup__lightBoxContainer",children:[Object(a.jsx)("img",{className:"popup__lightBoxImage",src:"".concat(r),alt:c}),Object(a.jsx)("figcaption",{className:"popup__lightBoxFigcaption",children:c})]})]})};var y=function(){var e=c.a.useState({name:"",about:"",avatar:"",_id:""}),t=Object(u.a)(e,2),n=t[0],r=t[1],o=c.a.useState([]),s=Object(u.a)(o,2),l=s[0],d=s[1];c.a.useEffect((function(){Promise.all([_.getUserInfo(),_.getInitialCards()]).then((function(e){var t=Object(u.a)(e,2),n=t[0],a=t[1];r(n),d(a)})).catch((function(e){return new Error("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e))}))}),[]);var f=c.a.useState(!1),m=Object(u.a)(f,2),j=m[0],h=m[1],O=c.a.useState(!1),g=Object(u.a)(O,2),N=g[0],y=g[1],S=c.a.useState(!1),B=Object(u.a)(S,2),T=B[0],U=B[1],P=c.a.useState(void 0),D=Object(u.a)(P,2),A=D[0],w=D[1];function L(){y(!1),U(!1),h(!1),w(void 0)}return Object(a.jsx)(b.Provider,{value:n,children:Object(a.jsxs)("div",{className:"page",children:[Object(a.jsx)(p,{}),Object(a.jsx)(v,{onAddPlace:function(){y(!0)},onEditProfile:function(){h(!0)},onEditAvatar:function(){U(!0)},cardClick:function(e){w(e)},cards:l,setCards:d}),Object(a.jsx)(x,{}),Object(a.jsx)(C,{isOpen:j,onClose:L,onUpdateUser:function(e){_.patchUserInfo(e).then((function(e){r(e),L()})).catch((function(e){return new Error("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e))}))}}),Object(a.jsx)(I,{isOpen:T,onClose:L,onUpdateAvatar:function(e){_.patchUserAvatar(e).then((function(e){r(e),L()})).catch((function(e){return new Error("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e))}))}}),Object(a.jsx)(k,{isOpen:N,onClose:L,onAddPlace:function(e){_.postNewCard(e).then((function(e){d([e].concat(Object(i.a)(l))),L()})).catch((function(e){return new Error("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e))}))}}),Object(a.jsx)(E,{card:A,onClose:L})]})})},S=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,17)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,o=t.getTTFB;n(e),a(e),r(e),c(e),o(e)}))};s.a.render(Object(a.jsx)(c.a.StrictMode,{children:Object(a.jsx)(y,{})}),document.getElementById("root")),S()}},[[16,1,2]]]);
//# sourceMappingURL=main.e471537d.chunk.js.map